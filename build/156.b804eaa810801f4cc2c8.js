"use strict";(self.webpackChunksocial_group=self.webpackChunksocial_group||[]).push([[156],{9156:(e,n,a)=>{a.r(n),a.d(n,{default:()=>W});var r=a(4848),t=a(7101),o=a(6142),l=a(3286),i=a(493),c=(0,i.zD)("profile/fetchProfileData",(function(e,n){return a=void 0,r=void 0,o=function(){var e,a,r;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(a=1,r&&(t=2&i[0]?r.return:i[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,i[1])).done)return t;switch(r=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){l.label=i[1];break}if(6===i[0]&&l.label<t[1]){l.label=t[1],t=i;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(i);break}t[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{a=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(t){switch(t.label){case 0:e=n.extra,a=n.rejectWithValue,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.api.get("/profile")];case 2:return[2,t.sent().data];case 3:return r=t.sent(),console.log(r),[2,a("error")];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function l(e){try{c(o.next(e))}catch(e){n(e)}}function i(e){try{c(o.throw(e))}catch(e){n(e)}}function c(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t((function(e){e(a)}))).then(l,i)}c((o=o.apply(a,r||[])).next())}));var a,r,t,o})),u=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.form},s=(0,i.zD)("profile/updateProfileData",(function(e,n){return a=void 0,r=void 0,o=function(){var e,a,r,t,o;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(a=1,r&&(t=2&i[0]?r.return:i[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,i[1])).done)return t;switch(r=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){l.label=i[1];break}if(6===i[0]&&l.label<t[1]){l.label=t[1],t=i;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(i);break}t[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{a=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(l){switch(l.label){case 0:e=n.extra,a=n.rejectWithValue,r=n.getState,t=u(r()),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,e.api.put("/profile",t)];case 2:return[2,l.sent().data];case 3:return o=l.sent(),console.log(o),[2,a("error")];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function l(e){try{c(o.next(e))}catch(e){n(e)}}function i(e){try{c(o.throw(e))}catch(e){n(e)}}function c(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t((function(e){e(a)}))).then(l,i)}c((o=o.apply(a,r||[])).next())}));var a,r,t,o})),d=function(){return d=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},d.apply(this,arguments)},f=(0,i.Z0)({name:"profile",initialState:{readonly:!0,isLoading:!1,error:void 0,data:void 0},reducers:{setReadonly:function(e,n){e.readonly=n.payload},cancelEdit:function(e){e.readonly=!0,e.form=e.data},updateProfile:function(e,n){e.form=d(d({},e.form),n.payload)}},extraReducers:function(e){e.addCase(c.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(c.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload})).addCase(c.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload})).addCase(s.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(s.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload,e.readonly=!0})).addCase(s.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload}))}}),p=f.actions,v=f.reducer,h=a(7228),y=a(3729),m=a(6540);var g,x=function(e){var n=e.className,a=e.src,o=e.size,l=e.alt,i=(0,m.useMemo)((function(){return{width:o||100,height:o||100}}),[o]);return(0,r.jsx)("img",{src:a,alt:l,style:i,className:(0,t.x)("ZqPdwJxd",{},[n])})};!function(e){e.RUB="RUB",e.EUR="EUR",e.USD="USD"}(g||(g={}));var b,j=function(){return j=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},j.apply(this,arguments)},C=(0,m.memo)((function(e){var n=e.className,a=e.label,o=e.options,l=e.onChange,i=e.value,c=e.readonly,u=(0,m.useMemo)((function(){return null==o?void 0:o.map((function(e){return(0,r.jsx)("option",j({className:"JkXz98qY",value:e.value},{children:e.content}),e.value)}))}),[o]);return(0,r.jsxs)("div",j({className:(0,t.x)("cidfdn6H",{},[n])},{children:[a&&(0,r.jsx)("span",j({className:"G1uuf7Bp"},{children:"".concat(a,">")})),(0,r.jsx)("select",j({disabled:c,className:"VOKOuKGo",value:i,onChange:function(e){l&&l(e.target.value)}},{children:u}))]}))})),N=[{value:g.RUB,content:g.RUB},{value:g.EUR,content:g.EUR},{value:g.USD,content:g.USD}],O=(0,m.memo)((function(e){var n=e.className,a=e.value,l=e.onChange,i=e.readonly,c=(0,o.B)().t,u=(0,m.useCallback)((function(e){null==l||l(e)}),[l]);return(0,r.jsx)(C,{className:(0,t.x)("",{},[n]),label:c("Укажите валюту"),options:N,value:a,onChange:u,readonly:i})}));!function(e){e.Russia="Russia",e.Belarus="Belarus",e.Ukraine="Ukraine",e.Kazakhstan="Kazahstan",e.Armenia="Armenia"}(b||(b={}));var P=[{value:b.Armenia,content:b.Armenia},{value:b.Russia,content:b.Russia},{value:b.Belarus,content:b.Belarus},{value:b.Kazakhstan,content:b.Kazakhstan},{value:b.Ukraine,content:b.Ukraine}],w=(0,m.memo)((function(e){var n=e.className,a=e.value,l=e.onChange,i=e.readonly,c=(0,o.B)().t,u=(0,m.useCallback)((function(e){null==l||l(e)}),[l]);return(0,r.jsx)(C,{className:(0,t.x)("",{},[n]),label:c("Укажите страну"),options:P,value:a,onChange:u,readonly:i})})),k=a(4027);const E={ProfileCard:"wW9jgKKD",input:"ZTyX8_n9",loading:"t07ZxFGs",error:"i5YK3SSb",avatarWrapper:"bEFNSahN",editing:"DjTe7269"};var R=function(){return R=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},R.apply(this,arguments)},U=function(e){var n,a,l=e.className,i=e.data,c=e.isLoading,u=e.error,s=e.readonly,d=e.onChangeFirstname,f=e.onChangeLastname,p=e.onChangeAge,v=e.onChangeCity,m=e.onChangeAvatar,g=e.onChangeUsername,b=e.onChangeCountry,j=e.onChangeCurrency,C=(0,o.B)("profile").t;if(c)return(0,r.jsx)("div",R({className:(0,t.x)(E.ProfileCard,(n={},n[E.loading]=!0,n),[l])},{children:(0,r.jsx)(k.a,{})}));if(u)return(0,r.jsx)("div",R({className:(0,t.x)(E.ProfileCard,{},[l,E.error])},{children:(0,r.jsx)(h.EY,{theme:h.$G.ERROR,title:C("Произошла ошибка при загрузке профиля"),text:C("Попробуйте обновить страницу"),align:h.nO.CENTER})}));var N=((a={})[E.editing]=!s,a);return(0,r.jsx)("div",R({className:(0,t.x)(E.ProfileCard,N,[l])},{children:(0,r.jsxs)("div",R({className:E.data},{children:[(null==i?void 0:i.avatar)&&(0,r.jsx)("div",R({className:E.avatarWrapper},{children:(0,r.jsx)(x,{src:null==i?void 0:i.avatar})})),(0,r.jsx)(y.p,{value:null==i?void 0:i.first,placeholder:C("Ваше имя"),className:E.input,onChange:d,readonly:s}),(0,r.jsx)(y.p,{value:null==i?void 0:i.lastname,placeholder:C("Ваша фамилия"),className:E.input,onChange:f,readonly:s}),(0,r.jsx)(y.p,{value:null==i?void 0:i.age,placeholder:C("Ваш возраст"),className:E.input,onChange:p,readonly:s}),(0,r.jsx)(y.p,{value:null==i?void 0:i.city,placeholder:C("Город"),className:E.input,onChange:v,readonly:s}),(0,r.jsx)(y.p,{value:null==i?void 0:i.username,placeholder:C("Введите имя пользователя"),className:E.input,onChange:g,readonly:s}),(0,r.jsx)(y.p,{value:null==i?void 0:i.avatar,placeholder:C("Введите ссылку на аватар"),className:E.input,onChange:m,readonly:s}),(0,r.jsx)(O,{className:E.input,value:null==i?void 0:i.currency,onChange:j,readonly:s}),(0,r.jsx)(w,{className:E.input,value:null==i?void 0:i.country,onChange:b,readonly:s})]}))}))},L=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.isLoading},B=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.error},S=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.readonly},A=a(9630),T=a(9966),F=a(895);const D={ProfilePageHeader:"FPJSgL1_",editBtn:"vP5lJqeW"};var I=function(){return I=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},I.apply(this,arguments)},G=function(e){var n=e.className,a=(0,o.B)("profile").t,l=(0,T.d4)(S),i=(0,A.j)(),c=(0,m.useCallback)((function(){i(p.setReadonly(!1))}),[i]),u=(0,m.useCallback)((function(){i(p.cancelEdit())}),[i]),d=(0,m.useCallback)((function(){i(s())}),[i]);return(0,r.jsxs)("div",I({className:(0,t.x)(D.ProfilePageHeader,{},[n])},{children:[(0,r.jsx)(h.EY,{title:a("Профиль")}),l?(0,r.jsx)(F.$n,I({className:D.editBtn,theme:F.Ox.OUTLINE,onClick:c},{children:a("Редактировать")})):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F.$n,I({className:D.editBtn,theme:F.Ox.OUTLINE_RED,onClick:u},{children:a("Отменить")})),(0,r.jsx)(F.$n,I({className:D.saveBtn,theme:F.Ox.OUTLINE,onClick:d},{children:a("Сохранить")}))]})]}))},K=function(){return K=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},K.apply(this,arguments)},z={profile:v};const W=function(e){var n=e.className,a=((0,o.B)().t,(0,A.j)()),i=(0,T.d4)(u),s=(0,T.d4)(L),d=(0,T.d4)(B),f=(0,T.d4)(S);(0,m.useEffect)((function(){a(c())}),[a]);var v=(0,m.useCallback)((function(e){a(p.updateProfile({first:e||""}))}),[a]),h=(0,m.useCallback)((function(e){a(p.updateProfile({lastname:e||""}))}),[a]),y=(0,m.useCallback)((function(e){a(p.updateProfile({city:e||""}))}),[a]),g=(0,m.useCallback)((function(e){a(p.updateProfile({age:Number(e||0)}))}),[a]),x=(0,m.useCallback)((function(e){a(p.updateProfile({username:e||""}))}),[a]),b=(0,m.useCallback)((function(e){a(p.updateProfile({avatar:e||""}))}),[a]),j=(0,m.useCallback)((function(e){a(p.updateProfile({currency:e}))}),[a]),C=(0,m.useCallback)((function(e){a(p.updateProfile({country:e}))}),[a]);return(0,r.jsx)(l.H,K({reducers:z,removeAfterUnmount:!0},{children:(0,r.jsxs)("div",K({className:(0,t.x)("",{},[n])},{children:[(0,r.jsx)(G,{}),(0,r.jsx)(U,{data:i,isLoading:s,error:d,readonly:f,onChangeFirstname:v,onChangeLastname:h,onChangeAge:g,onChangeCity:y,onChangeUsername:x,onChangeAvatar:b,onChangeCurrency:j,onChangeCountry:C})]}))}))}},3286:(e,n,a)=>{a.d(n,{H:()=>l});var r=a(4848),t=a(6540),o=a(9966),l=function(e){var n=e.children,a=e.reducers,l=e.removeAfterUnmount,i=(0,o.Pj)(),c=(0,o.wA)();return(0,t.useEffect)((function(){return Object.entries(a).forEach((function(e){var n=e[0],a=e[1];i.reducerManager.add(n,a),c({type:"@INIT ".concat(n," reducer")})})),function(){l&&Object.entries(a).forEach((function(e){var n=e[0];e[1],i.reducerManager.remove(n),c({type:"@DESTROY ".concat(n," reducer")})}))}}),[]),(0,r.jsx)(r.Fragment,{children:n})}},3729:(e,n,a)=>{a.d(n,{p:()=>i});var r=a(4848),t=a(7101),o=a(6540);var l=function(){return l=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},l.apply(this,arguments)},i=(0,o.memo)((function(e){var n=e.className,a=e.value,i=e.onChange,c=e.type,u=void 0===c?"text":c,s=e.placeholder,d=e.autofocus,f=e.readonly,p=function(e,n){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)n.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(e,r[t])&&(a[r[t]]=e[r[t]])}return a}(e,["className","value","onChange","type","placeholder","autofocus","readonly"]),v=(0,o.useRef)(null),h=(0,o.useState)(!1),y=h[0],m=h[1],g=(0,o.useState)(0),x=g[0],b=g[1],j=y&&!f;return(0,o.useEffect)((function(){var e;d&&(m(!0),null===(e=v.current)||void 0===e||e.focus())}),[d]),{}.fTN1PnWu=f,(0,r.jsxs)("div",l({className:(0,t.x)("LuFDUWoP",{},[n])},{children:[s&&(0,r.jsx)("div",l({className:"emAQQ85i"},{children:"".concat(s,">")})),(0,r.jsxs)("div",l({className:"y1GiFC_L"},{children:[(0,r.jsx)("input",l({ref:v,type:u,value:a,onChange:function(e){null==i||i(e.target.value),b(e.target.value.length)},className:"LVdIPwcx",onFocus:function(){m(!0)},onBlur:function(){m(!1)},onSelect:function(e){var n;b((null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.selectionStart)||0)},readOnly:f},p)),j&&(0,r.jsx)("span",{className:"lqMFGBuL",style:{left:"".concat(9*x,"px")}})]}))]}))}))},7228:(e,n,a)=>{a.d(n,{EY:()=>s,nO:()=>c,$G:()=>i});var r=a(4848),t=a(7101),o=a(6540);const l={title:"ikI7VPeL",text:"uNJeeCm1",error:"F9oLXAK4",left:"dBqPIG8f",right:"j4UBrvei",center:"iJw6m2iu"};var i,c,u=function(){return u=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},u.apply(this,arguments)};!function(e){e.PRIMARY="primary",e.ERROR="error"}(i||(i={})),function(e){e.RIGHT="right",e.LEFT="left",e.CENTER="center"}(c||(c={}));var s=(0,o.memo)((function(e){var n,a=e.className,o=e.text,s=e.title,d=e.theme,f=void 0===d?i.PRIMARY:d,p=e.align,v=void 0===p?c.LEFT:p,h=((n={})[l[f]]=!0,n[l[v]]=!0,n);return(0,r.jsxs)("div",u({className:(0,t.x)(l.Text,h,[a])},{children:[s&&(0,r.jsx)("p",u({className:l.title},{children:s})),o&&(0,r.jsx)("p",u({className:l.text},{children:o}))]}))}))},9630:(e,n,a)=>{a.d(n,{j:()=>t});var r=a(9966),t=function(){return(0,r.wA)()}}}]);